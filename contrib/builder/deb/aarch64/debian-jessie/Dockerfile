#
# THIS FILE IS AUTOGENERATED; SEE "contrib/builder/deb/aarch64/generate.sh"!
#

FROM aarch64/debian:jessie

RUN apt-get update && apt-get install -y apparmor bash-completion btrfs-tools build-essential cmake curl ca-certificates debhelper dh-apparmor dh-systemd git libapparmor-dev libdevmapper-dev libltdl-dev libsqlite3-dev pkg-config vim-common bzip2 --no-install-recommends && rm -rf /var/lib/apt/lists/*

# Install Go
ENV GO_VERSION 1.7.4
RUN mkdir /usr/src/go-bootstrap \
  && curl -fsSL https://github.com/DieterReuter/go-bootstrap/releases/download/v20170118-193232/go-linux-arm64-bootstrap.tbz | tar -v -C /usr/src/go-bootstrap -xj --strip-components=1

RUN mkdir /usr/src/go && curl -fsSL https://golang.org/dl/go${GO_VERSION}.src.tar.gz | tar -v -C /usr/src/go -xz --strip-components=1 \
  && cd /usr/src/go/src \
  && GOOS=linux GOARCH=arm64 GOROOT_BOOTSTRAP="/usr/src/go-bootstrap" ./make.bash

ENV PATH $PATH:/usr/src/go/bin

ENV AUTO_GOPATH 1

ENV DOCKER_BUILDTAGS apparmor pkcs11 selinux
ENV RUNC_BUILDTAGS apparmor selinux
